<?php
require_once('../tools.php');

/**
 *
 * アクセスURL
 * http://localhost/setbookrelates/
 *
 * 関連書誌を相互に紐づける
 * 書誌の存在チェック、すでに紐づいているものはスキップする
 *
 */

$datalist = array(
  10090115 => array(10090116,10090117,10090118,10090119,10090120,10091415),
  10090116 => array(10090115,10090117,10090118,10090119,10090120,10091415),
  10090117 => array(10090115,10090116,10090118,10090119,10090120,10091415),
  10090118 => array(10090115,10090116,10090117,10090119,10090120,10091415),
  10090119 => array(10090115,10090116,10090117,10090118,10090120,10091415),
  10090120 => array(10090115,10090116,10090117,10090118,10090119,10091415),
  10090172 => array(10090183),
  10090173 => array(10090184),
  10090174 => array(10090185),
  10090175 => array(10090186),
  10090176 => array(10090187),
  10090177 => array(10090188),
  10090178 => array(10090189),
  10090179 => array(10090190),
  10090180 => array(10090191),
  10090181 => array(10090192),
  10090183 => array(10090172),
  10090184 => array(10090173),
  10090185 => array(10090174),
  10090186 => array(10090175),
  10090187 => array(10090176),
  10090188 => array(10090177),
  10090189 => array(10090178),
  10090190 => array(10090179),
  10090191 => array(10090180),
  10090192 => array(10090181),
  10090193 => array(10090194,10090195,10090196,10090197,10090198),
  10090194 => array(10090193,10090195,10090196,10090197,10090198),
  10090195 => array(10090193,10090194,10090196,10090197,10090198),
  10090196 => array(10090193,10090194,10090195,10090197,10090198),
  10090197 => array(10090193,10090194,10090195,10090196,10090198),
  10090198 => array(10090193,10090194,10090195,10090196,10090197),
  10090217 => array(10090754),
  10090221 => array(10090222,10090223,10090224,10090225,10090227,10090228,10090229),
  10090222 => array(10090221,10090223,10090224,10090225,10090227,10090228,10090229),
  10090223 => array(10090221,10090222,10090224,10090225,10090227,10090228,10090229),
  10090224 => array(10090221,10090222,10090223,10090225,10090227,10090228,10090229),
  10090225 => array(10090221,10090222,10090223,10090224,10090227,10090228,10090229),
  10090226 => array(10090221,10090222,10090223,10090224,10090225,10090227,10090228,10090229),
  10090228 => array(10090221,10090222,10090223,10090224,10090225,10090227,10090229),
  10090229 => array(10090221,10090222,10090223,10090224,10090225,10090227,10090228),
  10090240 => array(10090706,10090952,10090753),
  10090271 => array(10091797),
  10090275 => array(10091835),
  10090292 => array(10090293,10090294,10090295,10090296,10090297),
  10090293 => array(10090292,10090294,10090295,10090296,10090297),
  10090294 => array(10090292,10090293,10090295,10090296,10090297),
  10090295 => array(10090292,10090293,10090294,10090296,10090297),
  10090296 => array(10090292,10090293,10090294,10090295,10090297),
  10090385 => array(10091842),
  10090417 => array(10090421,10090427,10090429,10090434),
  10090421 => array(10090417,10090427,10090429,10090434),
  10090427 => array(10090417,10090421,10090429,10090434),
  10090429 => array(10090417,10090421,10090427,10090434),
  10090434 => array(10090417,10090421,10090427,10090429),
  10090446 => array(10090448),
  10090448 => array(10090446),
  10090469 => array(10091650),
  10090470 => array(10090477,10090474,10090487),
  10090474 => array(10090487,10090477),
  10090477 => array(10090474,10090487),
  10090480 => array(10090482),
  10090482 => array(10090480),
  10090487 => array(10090474,10090477),
  10090488 => array(10090472,10090484),
  10090490 => array(10090488),
  10090491 => array(10090493),
  10090493 => array(10090491),
  10090505 => array(10090500,10090564,10090518),
  10090510 => array(10090512),
  10090512 => array(10090510),
  10090514 => array(10090515,10090516,10090517,10090518,10090519,10090520),
  10090515 => array(10090514,10090516,10090517,10090518,10090519,10090520),
  10090516 => array(10090514,10090515,10090517,10090518,10090519,10090520),
  10090517 => array(10090514,10090515,10090516,10090518,10090519,10090520),
  10090518 => array(10090514,10090515,10090516,10090517,10090519,10090520),
  10090519 => array(10090514,10090515,10090516,10090517,10090518,10090520),
  10090520 => array(10090514,10090515,10090516,10090517,10090518,10090519),
  10090522 => array(10090523,10090526,10090535),
  10090523 => array(10090522,10090526,10090535),
  10090524 => array(10091824),
  10090526 => array(10091848,10090532,10090522,10090535),
  10090527 => array(10091826),
  10090530 => array(10091827,10090531,10090534,10091828),
  10090531 => array(10090530,10091827,10090534,10091828),
  10090532 => array(10090526,10091848,10090522,10090535),
  10090534 => array(10091828),
  10090535 => array(10091841,10090537,10090522,10090526),
  10090537 => array(10090535,10091841,10090522,10090526),
  10090539 => array(10091839,10090540,10090541,10091840,10090549),
  10090540 => array(10090539,10091839,10090541,10091840,10090549),
  10090541 => array(10090539,10091839,10090540,10091840,10090549),
  10090543 => array(10091845,10090544,10090545,10091846),
  10090544 => array(10090543,10091845,10090545,10091846),
  10090545 => array(10091846,10090543,10091845),
  10090549 => array(10090539,10091839,10090540,10090541,10091840),
  10090550 => array(10090585),
  10090553 => array(10090557,10091849,10090587,10090588),
  10090554 => array(10090556),
  10090556 => array(10090554),
  10090557 => array(10090553,10091849,10090587,10090588),
  10090561 => array(10090563,10090562,10091851,10090575),
  10090562 => array(10091851,10090561,10090563,10090575),
  10090563 => array(10090561,10090562,10091851,10090575),
  10090566 => array(10090583),
  10090570 => array(10090572,10090571,10091852,10090578),
  10090571 => array(10090570,10090572,10091852,10090578),
  10090572 => array(10090570,10090571,10091852,10090578),
  10090574 => array(10092040),
  10090575 => array(10090561,10090563,10090562,10091851),
  10090576 => array(10090586),
  10090578 => array(10090570,10090572,10090571,10091852),
  10090580 => array(10090447,10090538,10090503),
  10090583 => array(10090566),
  10090585 => array(10090550),
  10090586 => array(10090576),
  10090587 => array(10090588,10090553,10091849,10090557),
  10090588 => array(10090587,10090553,10091849,10090557),
  10090600 => array(10090601),
  10090601 => array(10090600),
  10090603 => array(10090605),
  10090605 => array(10090603),
  10090606 => array(10090611,10090613,10090615,10090616,10090617,10090622,10090629),
  10090607 => array(10090608),
  10090608 => array(10090607),
  10090609 => array(10090624),
  10090611 => array(10090606,10090613,10090615,10090616,10090617,10090622,10090629),
  10090613 => array(10090606,10090611,10090615,10090616,10090617,10090622,10090629),
  10090615 => array(10090606,10090611,10090613,10090616,10090617,10090622,10090629),
  10090616 => array(10090606,10090611,10090613,10090615,10090617,10090622,10090629),
  10090617 => array(10090606,10090611,10090613,10090615,10090616,10090622,10090629),
  10090622 => array(10090606,10090611,10090613,10090615,10090616,10090617,10090629),
  10090623 => array(10090628),
  10090624 => array(10090609),
  10090628 => array(10090623),
  10090629 => array(10090606,10090611,10090613,10090615,10090616,10090617,10090622),
  10090679 => array(10091822),
  10090699 => array(10090754),
  10090701 => array(10090717),
  10090706 => array(10090952,10090240,10090753),
  10090717 => array(10090701),
  10090734 => array(10090754),
  10090736 => array(10090754),
  10090740 => array(10090751,10091394,10090755),
  10090745 => array(10090754),
  10090750 => array(10091161),
  10090751 => array(10090740,10091394,10090755),
  10090753 => array(10090706,10090952,10090240),
  10090754 => array(10090736,10090745,10090734,10090699,10090217),
  10090755 => array(10090740,10090751),
  10090766 => array(10091794),
  10090787 => array(10090803,10090823),
  10090801 => array(10090839),
  10090803 => array(10090787,10090823),
  10090805 => array(10090808,10090815),
  10090808 => array(10090805,10090815),
  10090809 => array(10090839),
  10090815 => array(10090805,10090808),
  10090823 => array(10090787,10090803),
  10090830 => array(10090840),
  10090831 => array(10090832),
  10090832 => array(10090831),
  10090835 => array(10090840),
  10090836 => array(10091161),
  10090838 => array(10090993),
  10090839 => array(10090801,10090809),
  10090840 => array(10090835,10090835),
  10090841 => array(10090842),
  10090842 => array(10090841),
  10090863 => array(10091806),
  10090867 => array(10091809),
  10090879 => array(10091793),
  10090907 => array(10090958),
  10090923 => array(10091795),
  10090933 => array(10090961),
  10090950 => array(10090963,10090957),
  10090952 => array(10090706,10090240,10090753),
  10090955 => array(10090956),
  10090956 => array(10090955),
  10090957 => array(10091838,10090974,10090950),
  10090958 => array(10090907),
  10090961 => array(10090933),
  10090963 => array(10091844,10090950,10090974),
  10090974 => array(10091847,10090957,10090950),
  10090978 => array(10090979),
  10090979 => array(10090978),
  10090980 => array(10090981,10091332,10091305),
  10090981 => array(10090980,10091332,10091305),
  10090986 => array(10091850),
  10090993 => array(10090838),
  10091011 => array(10091798),
  10091012 => array(10091799),
  10091030 => array(10091044),
  10091031 => array(10091032),
  10091032 => array(10091031),
  10091033 => array(10091053),
  10091034 => array(10091033),
  10091035 => array(10091042),
  10091036 => array(10091040),
  10091037 => array(10091036,10091040),
  10091038 => array(10091036,10091037,10091040),
  10091040 => array(10091036),
  10091042 => array(10091035),
  10091044 => array(10091030),
  10091046 => array(10091047,10091048),
  10091047 => array(10091046,10091048),
  10091048 => array(10091046,10091047),
  10091051 => array(10091052),
  10091052 => array(10091051),
  10091053 => array(10091063),
  10091063 => array(10091053),
  10091064 => array(10091065),
  10091065 => array(10091064),
  10091072 => array(10091076),
  10091074 => array(10091075),
  10091075 => array(10091074),
  10091076 => array(10091072),
  10091077 => array(10091079),
  10091079 => array(10091077,10091358,10091377),
  10091081 => array(10091800,10091830),
  10091082 => array(10091801,10091831),
  10091083 => array(10091802,10091832),
  10091084 => array(10091803,10091833),
  10091085 => array(10091808),
  10091088 => array(10091090,10091119,10091120),
  10091089 => array(10091810),
  10091090 => array(10091088,10091119,10091120),
  10091091 => array(10091811),
  10091092 => array(10091812),
  10091098 => array(10091211,10091227,10091843,10091239,10091250,10091299),
  10091099 => array(10091814),
  10091101 => array(10091815),
  10091102 => array(10091816),
  10091103 => array(10091817),
  10091104 => array(10091818),
  10091105 => array(10091111,10091112,10091106,10091107,10091108,10091109),
  10091106 => array(10091111,10091112,10091105,10091107,10091108,10091109),
  10091107 => array(10091111,10091112,10091105,10091106,10091108,10091109),
  10091108 => array(10091111,10091112,10091105,10091106,10091107,10091109),
  10091109 => array(10091111,10091112,10091105,10091106,10091107,10091108),
  10091111 => array(10091112,10091105,10091106,10091107,10091108,10091109),
  10091112 => array(10091111,10091105,10091106,10091107,10091108,10091109),
  10091113 => array(10091114,10091115,10091116),
  10091114 => array(10091113,10091115,10091116),
  10091115 => array(10091113,10091114,10091116),
  10091116 => array(10091113,10091114,10091115),
  10091119 => array(10091120,10091088,10091090),
  10091120 => array(10091119,10091088,10091090),
  10091126 => array(10091127,10091128,10091129),
  10091127 => array(10091126,10091128,10091129),
  10091128 => array(10091126,10091127,10091129),
  10091129 => array(10091126,10091127,10091128),
  10091137 => array(10091154,10091159,10091162),
  10091141 => array(10091158),
  10091144 => array(10091160,10091154,10091159,10091409),
  10091145 => array(10091372),
  10091154 => array(10091160,10091159,10091162),
  10091157 => array(10091153),
  10091158 => array(10091141),
  10091159 => array(10091160,10091154,10091162),
  10091160 => array(10091154,10091159,10091162),
  10091161 => array(10090750,10090836,10091409),
  10091162 => array(10091160,10091159,10091154),
  10091163 => array(10091154,10091160),
  10091173 => array(10091804),
  10091178 => array(10091805),
  10091179 => array(10091807),
  10091180 => array(10091819),
  10091184 => array(10091820),
  10091207 => array(10091216),
  10091211 => array(10091227,10091098,10091843,10091239,10091250,10091299,10091079),
  10091216 => array(10091207),
  10091221 => array(10091225,10091339),
  10091222 => array(10091211,10091227,10091098,10091843,10091239,10091250,10091299),
  10091225 => array(10091221,10091339),
  10091227 => array(10091211,10091098,10091843,10091239,10091250,10091299),
  10091233 => array(10091248),
  10091239 => array(10091211,10091098,10091843,10091250,10091299),
  10091241 => array(10091260,10091287),
  10091242 => array(10091211,10091227,10091098,10091843,10091239,10091250,10091299),
  10091244 => array(10091369,10091304,10091408),
  10091246 => array(10091261),
  10091248 => array(10091340),
  10091250 => array(10091211,10091227,10091098,10091843,10091239,10091299),
  10091258 => array(10091317,10091331),
  10091260 => array(10091241,10091287),
  10091261 => array(10091246),
  10091262 => array(10091269),
  10091269 => array(10091262),
  10091271 => array(10091390,10091333),
  10091287 => array(10091241,10091260),
  10091299 => array(10091211,10091227,10091098,10091843,10091239,10091250),
  10091300 => array(10091308,10091309,10091301,10091302,10091303,10091318,10091319,10091341),
  10091301 => array(10091308,10091309,10091300,10091302,10091303,10091318,10091319,10091341),
  10091302 => array(10091308,10091309,10091300,10091301,10091303,10091318,10091319,10091341),
  10091303 => array(10091308,10091309,10091300,10091301,10091302,10091318,10091319,10091341),
  10091304 => array(10091244,10091369),
  10091305 => array(10091332),
  10091306 => array(10091322,10091351),
  10091308 => array(10091309,10091300,10091301,10091302,10091303,10091318,10091319,10091341),
  10091309 => array(10091308,10091300,10091301,10091302,10091303,10091318,10091319,10091341),
  10091312 => array(10091325),
  10091315 => array(10091316),
  10091316 => array(10091315),
  10091317 => array(10091331),
  10091318 => array(10091308,10091309,10091300,10091301,10091302,10091303,10091319,10091341),
  10091319 => array(10091308,10091309,10091300,10091301,10091302,10091303,10091318,10091341),
  10091321 => array(10091337),
  10091322 => array(10091306,10091351),
  10091325 => array(10091312),
  10091328 => array(10091404),
  10091331 => array(10091317),
  10091332 => array(10091305),
  10091333 => array(10091271,10091390),
  10091337 => array(10091321),
  10091339 => array(10091221,10091225),
  10091341 => array(10091308,10091309,10091300,10091301,10091302,10091303,10091318,10091319),
  10091346 => array(10091400,10091378,10091367,10091366,10091365,10091361,10091358,10091353,10091412),
  10091351 => array(10091322,10091306),
  10091353 => array(10091400,10091378,10091367,10091366,10091365,10091358,10091361,10091346,10091412),
  10091354 => array(10091355),
  10091355 => array(10091354),
  10091358 => array(10091400,10091378,10091367,10091366,10091365,10091353,10091361,10091346,10091412,10091079),
  10091361 => array(10091400,10091378,10091367,10091366,10091365,10091358,10091353,10091346,10091412),
  10091365 => array(10091400,10091378,10091367,10091366,10091361,10091353,10091358,10091346,10091412),
  10091366 => array(10091400,10091378,10091367,10091361,10091353,10091358,10091346,10091412),
  10091367 => array(10091400,10091378,10091366,10091361,10091353,10091358,10091346,10091412),
  10091368 => array(10091411),
  10091369 => array(10091244,10091304,10091408),
  10091372 => array(10091145),
  10091377 => array(10091079),
  10091378 => array(10091400,10091367,10091366,10091361,10091353,10091358,10091346,10091412),
  10091386 => array(10091405,10091393,10090115,10090116,10090117,10090118),
  10091390 => array(10091271,10091333),
  10091391 => array(10091244,10091369),
  10091392 => array(10091410),
  10091393 => array(10091405,10091386,10090115,10090116,10090117,10090118),
  10091394 => array(10090740,10090751),
  10091395 => array(10091402,10091416),
  10091396 => array(10091905,10091906,10091910),
  10091397 => array(10091410),
  10091398 => array(10091411),
  10091400 => array(10091378,10091367,10091366,10091361,10091353,10091358,10091346,10091412),
  10091402 => array(10091395),
  10091404 => array(10091328),
  10091405 => array(10090115,10090116,10090117,10090118,10091386,10091393),
  10091406 => array(10091331,10091317),
  10091408 => array(10091244,10091369,10091413,10091414),
  10091409 => array(10091161,10091162),
  10091410 => array(10091392,10091397),
  10091412 => array(10091400,10091378,10091367,10091366,10091365,10091361,10091358,10091353,10091346),
  10091413 => array(10091408,10091414),
  10091414 => array(10091408,10091413),
  10091415 => array(10090115,10090116,10090117,10090118,10090119,10090120),
  10091416 => array(10091395),
  10091509 => array(10091543,10091535),
  10091535 => array(10091543,10091509),
  10091543 => array(10091509,10091535),
  10091546 => array(10091547,10091548,10091553,10091555),
  10091547 => array(10091546,10091548,10091553,10091555),
  10091548 => array(10091546,10091547,10091553,10091555),
  10091553 => array(10091546,10091547,10091548,10091555),
  10091555 => array(10091546,10091547,10091548,10091553),
  10091567 => array(10091570),
  10091570 => array(10091567),
  10091610 => array(10091829),
  10091632 => array(10091633),
  10091633 => array(10091632),
  10091643 => array(10091649),
  10091649 => array(10091643),
  10091650 => array(10090469),
  10091655 => array(10091665),
  10091658 => array(10091663),
  10091662 => array(10091664),
  10091664 => array(10091662),
  10091665 => array(10091655),
  10091668 => array(10091669,10091670),
  10091669 => array(10091668,10091670,10091411),
  10091670 => array(10091669,10091668,10091411),
  10091671 => array(10091672),
  10091672 => array(10091671),
  10091673 => array(10091674),
  10091674 => array(10091673),
  10091694 => array(10091731),
  10091698 => array(10091834),
  10091701 => array(10091702),
  10091702 => array(10091701),
  10091716 => array(10091719,10091725),
  10091719 => array(10091716,10091725),
  10091720 => array(10091721,10091733,10091783),
  10091721 => array(10091720,10091733,10091783),
  10091725 => array(10091719,10091716),
  10091730 => array(10091748),
  10091731 => array(10091694),
  10091733 => array(10091720,10091721,10091783),
  10091737 => array(10091738,10091739),
  10091738 => array(10091737,10091739),
  10091739 => array(10091737,10091738),
  10091748 => array(10091730),
  10091750 => array(10091751),
  10091751 => array(10091750),
  10091754 => array(10091755),
  10091755 => array(10091754),
  10091763 => array(10091764),
  10091764 => array(10091763),
  10091767 => array(10091768),
  10091768 => array(10091767),
  10091780 => array(10091853,10091781,10091854),
  10091781 => array(10091854,10091780,10091853),
  10091782 => array(10091787),
  10091783 => array(10091733,10091720,10091721),
  10091786 => array(10091788),
  10091787 => array(10091782),
  10091788 => array(10091786),
  10091793 => array(10090879),
  10091794 => array(10090766),
  10091795 => array(10090923),
  10091796 => array(10090934),
  10091797 => array(10090271),
  10091809 => array(10090867),
  10091811 => array(10091091),
  10091812 => array(10091092),
  10091814 => array(10091099),
  10091815 => array(10091101),
  10091816 => array(10091102),
  10091817 => array(10091103),
  10091821 => array(10090880),
  10091822 => array(10090679),
  10091823 => array(10090522,10090523,10090526,10090535),
  10091825 => array(10090526,10090532,10090522,10090535),
  10091828 => array(10090534),
  10091829 => array(10091610),
  10091834 => array(10091698),
  10091836 => array(10091211,10091227,10091098,10091843,10091239,10091250,10091299),
  10091837 => array(10090950),
  10091838 => array(10090957),
  10091839 => array(10090539,10090540,10090541,10091840,10090549),
  10091840 => array(10090539,10091839,10090540,10090541,10090549),
  10091841 => array(10090535,10090537,10090522,10090526),
  10091842 => array(10090385),
  10091843 => array(10091211,10091227,10091098,10091239,10091250,10091299),
  10091844 => array(10090963),
  10091845 => array(10090543,10090544,10090545,10091846),
  10091846 => array(10090545,10090543,10091845),
  10091847 => array(10090974),
  10091848 => array(10090526,10090532,10090522,10090535),
  10091849 => array(10090553,10090557,10090587,10090588),
  10091850 => array(10090986),
  10091851 => array(10090562,10090561,10090563,10090575),
  10091852 => array(10090570,10090572,10090571,10090578),
  10091853 => array(10091780,10091781,10091854),
  10091854 => array(10091781,10091780,10091853),
  10091857 => array(10091449),
  10091858 => array(10091446),
  10091859 => array(10091904),
  10091860 => array(10091861),
  10091861 => array(10091860),
  10091864 => array(10091865,10091912,10091911),
  10091865 => array(10091864,10091912,10091911),
  10091866 => array(10091867,10091914,10091914),
  10091867 => array(10091866,10091914,10091914),
  10091871 => array(10091872,10091916,10091915,10091952,10091939,10091952),
  10091872 => array(10091871,10091916,10091915,10091952,10091939),
  10091873 => array(10091917,10091954),
  10091879 => array(10091882),
  10091880 => array(10091892,10091890,10091891,10091889,10091893),
  10091881 => array(10091883),
  10091882 => array(10091879),
  10091883 => array(10091881),
  10091884 => array(10091885),
  10091885 => array(10091884),
  10091888 => array(10091891,10091889,10091894,10091893,10091880,10092025,10092044,10092051),
  10091889 => array(10091891,10091893,10091880),
  10091890 => array(10091892),
  10091891 => array(10091889,10091893,10091880),
  10091892 => array(10091890),
  10091893 => array(10091892,10091890,10091891,10091889,10091880),
  10091894 => array(10091891,10091889,10091888,10091893,10091880,10092025,10092044,10092050,10092051),
  10091895 => array(10091919),
  10091896 => array(10091920),
  10091897 => array(10091920),
  10091898 => array(10091920),
  10091901 => array(10091903,10091899),
  10091902 => array(10091924),
  10091903 => array(10091901,10091899),
  10091904 => array(10091859,10091925,10091860,10091908,10091907,10092047,10092049,10091862,10092027),
  10091905 => array(10091906,10091396,10091910),
  10091906 => array(10091905,10091396,10091910),
  10091907 => array(10091908),
  10091908 => array(10091907),
  10091910 => array(10091906,10091905,10091396),
  10091911 => array(10091865,10091864,10091912),
  10091912 => array(10091865,10091864,10091911),
  10091913 => array(10091914,10091867,10091866),
  10091914 => array(10091913,10091867,10091866),
  10091915 => array(10091872,10091871,10091916,10091952,10091939),
  10091916 => array(10091872,10091871,10091915,10091952,10091939,10091952),
  10091917 => array(10091873,10091954),
  10091919 => array(10091896),
  10091920 => array(10091898),
  10091924 => array(10091902),
  10091925 => array(10091904),
  10091927 => array(10091928,10091929),
  10091928 => array(10091927,10091929),
  10091929 => array(10091928,10091927),
  10091937 => array(10091997),
  10091938 => array(10091997),
  10091939 => array(10091872,10091871,10091916,10091915,10091952),
  10091952 => array(10091872,10091871,10091916,10091915,10091939),
  10091954 => array(10091873,10091917),
  10091963 => array(10091964),
  10091975 => array(10091976),
  10091976 => array(10091975),
  10091984 => array(10091985),
  10091992 => array(10091993,10092054),
  10091993 => array(10091992,10092054),
  10091997 => array(10091938),
  10092005 => array(10092009,10092012,10092037),
  10092009 => array(10092005,10092012,10092037),
  10092012 => array(10092005,10092009,10092037),
  10092019 => array(10092022),
  10092021 => array(10091891,10091889,10091888,10091894,10091893,10091880,10092025,10092023,10092044),
  10092023 => array(10091891,10091889,10091888,10091894,10091893,10091880,10092025,10092044),
  10092024 => array(10091891,10091889,10091888,10091894,10091893,10091880,10092023,10092044),
  10092025 => array(10091891,10091889,10091888,10091894,10091893,10091880,10092044,10092050,10092051),
  10092026 => array(10091862,10092028),
  10092027 => array(10091862,10092051),
  10092028 => array(10091862,10092027),
  10092030 => array(10092029),
  10092031 => array(10092033),
  10092033 => array(10092031),
  10092037 => array(10092005,10092009,10092012),
  10092038 => array(10092039),
  10092039 => array(10092038),
  10092040 => array(10090574),
  10092043 => array(10091891,10091889,10091888,10091894,10091893,10091880,10092025,10092023),
  10092044 => array(10091891,10091889,10091888,10091894,10091893,10091880,10092025,10092050,10092051),
  10092047 => array(10091908,10091907,10092049,10092051),
  10092048 => array(10091861,10091860,10092049,10092051),
  10092049 => array(10091861,10091860,10091908,10091907,10092048,10092047,10092051),
  10092050 => array(10091891,10091889,10091888,10091894,10091893,10091880,10092044,10092051),
  10092051 => array(10091891,10091889,10091888,10091894,10091893,10091880,10092044,10092050,10091861,10091860,10092048,10091908,10091907,10092047,10092049,10091862,10092027),
  10092053 => array(10091996),
  10092054 => array(10091992,10091993),
  10092055 => array(10092065),
  10092056 => array(10092074),
  10092060 => array(10092061,10092062,10092063),
  10092061 => array(10092060,10092062,10092063),
  10092062 => array(10092060,10092061,10092063),
  10092063 => array(10092060,10092061,10092062),
  10092065 => array(10092096),
  10092066 => array(10092067),
  10092067 => array(10092069),
  10092068 => array(10092067),
  10092069 => array(10092067),
  10092096 => array(10092065),
  10092106 => array(10090173),
  10092107 => array(10090174),
  10092108 => array(10090175),
  10092109 => array(10090176),
  10092110 => array(10090177),
  10092111 => array(10090178),
  10092112 => array(10090179),
  10092113 => array(10090180),
  10092114 => array(10090181),
  10092115 => array(10090194,10090195,10090196,10090197,10090198),
  10092116 => array(10090193,10090194,10090196,10090197,10090198),
  10092117 => array(10090193,10090194,10090195,10090197,10090198),
  10092118 => array(10090193,10090194,10090195,10090196,10090197),
  10092120 => array(10091835),
  10092168 => array(10090448),
  10092169 => array(10090446),
  10092179 => array(10090512),
  10092180 => array(10090510),
  10092184 => array(10092040),
  10092185 => array(10090566),
  10092187 => array(10090550),
  10092188 => array(10090608),
  10092189 => array(10090607),
  10092191 => array(10090952,10090240,10090753),
  10092194 => array(10090706,10090952,10090240),
  10092195 => array(10090839),
  10092198 => array(10090831),
  10092199 => array(10090835,10090835),
  10092200 => array(10090842),
  10092201 => array(10090841),
  10092205 => array(10090838),
  10092211 => array(10091033),
  10092214 => array(10091063),
  10092216 => array(10091053),
  10092219 => array(10091076),
  10092220 => array(10091072),
  10092221 => array(10091079),
  10092222 => array(10091077,10091358,10091377),
  10092223 => array(10091811),
  10092224 => array(10091817),
  10092225 => array(10091818),
  10092229 => array(10091158),
  10092234 => array(10091153),
  10092235 => array(10091141),
  10092236 => array(10090750,10090836,10091409),
  10092238 => array(10091216),
  10092242 => array(10091248),
  10092243 => array(10091260,10091287),
  10092244 => array(10091340),
  10092252 => array(10091317,10091331),
  10092254 => array(10091241,10091287),
  10092258 => array(10091390,10091333),
  10092265 => array(10091241,10091260),
  10092272 => array(10091308,10091309,10091301,10091302,10091303,10091318,10091319,10091341),
  10092273 => array(10091308,10091309,10091300,10091302,10091303,10091318,10091319,10091341),
  10092274 => array(10091308,10091309,10091300,10091301,10091303,10091318,10091319,10091341),
  10092275 => array(10091308,10091309,10091300,10091301,10091302,10091318,10091319,10091341),
  10092276 => array(10091309,10091300,10091301,10091302,10091303,10091318,10091319,10091341),
  10092277 => array(10091308,10091300,10091301,10091302,10091303,10091318,10091319,10091341),
  10092278 => array(10091308,10091309,10091300,10091301,10091302,10091303,10091319,10091341),
  10092279 => array(10091308,10091309,10091300,10091301,10091302,10091303,10091318,10091341),
  10092281 => array(10091404),
  10092282 => array(10091317),
  10092283 => array(10091271,10091390),
  10092285 => array(10091308,10091309,10091300,10091301,10091302,10091303,10091318,10091319),
  10092287 => array(10091400,10091378,10091367,10091366,10091365,10091358,10091361,10091346,10091412),
  10092288 => array(10091400,10091378,10091367,10091366,10091365,10091353,10091361,10091346,10091412,10091079),
  10092289 => array(10091400,10091378,10091366,10091361,10091353,10091358,10091346,10091412),
  10092294 => array(10091271,10091333),
  10092296 => array(10091395),
  10092297 => array(10091244,10091369,10091413,10091414),
  10092298 => array(10091408,10091414),
  10092299 => array(10091408,10091413),
  10092300 => array(10091395),
  10092304 => array(10091663),
  10092309 => array(10091655),
);
// ↑ キー 主書誌、array サブ書誌

// $publisher_id = 24;
// $publisher_id = 86; // 学陽書房 pro stg
// $publisher_id = 1125; // 竹書房 pro
$publisher_id = 1163; // 研究社 pro

/**
* 環境
*/
$env = 'pro';
// $env = 'stg';
// $env = 'docker';

$db = new PDO(tools::getDsn($env), tools::getUser($env), tools::getPassword($env));


$datacount = count($datalist);

ob_start();

foreach ($datalist as $k => $v) {
  // 書誌の存在チェック
  $sql = "select id from books where id = '{$k}' and publisher_id = {$publisher_id};";
  $sth = $db->query($sql);
  $mainbook = $sth->fetch(PDO::FETCH_ASSOC);
  if(empty($mainbook)) {
    // 書誌データがない場合は スキップ
    echo "not main book data id {$k}<br>";
    flush();
    ob_flush();
    continue;
  }

  foreach ($v as $k2 => $v2) {
    // 書誌の存在チェック
    $sql = "select id from books where id = '{$v2}' and publisher_id = {$publisher_id};";
    $sth = $db->query($sql);
    $subbook = $sth->fetch(PDO::FETCH_ASSOC);
    if(empty($subbook)) {
      // 書誌データがない場合は スキップ
      echo "not sub book data id {$k} > {$v2}<br>";
      flush();
      ob_flush();
      continue;
    }

    // main > sub の関連書籍レコードの存在チェック
    $sql = "select id from book_relates where book_id = '{$k}' and book_relate_book_id = {$v2};";
    $sth = $db->query($sql);
    $check = $sth->fetch(PDO::FETCH_ASSOC);
    if(empty($check)) {
      // 並び順を取得
      $order = 1;
      $sql = "select max(display_order) as maxorder from book_relates where book_id = '{$k}';";
      $sth = $db->query($sql);
      $max = $sth->fetch(PDO::FETCH_ASSOC);
      if(!empty($max)) {
        $order = intval($max['maxorder']) + 1;
      }

      // main > sub の関連書籍レコード 追加
      $sql = "insert into book_relates (book_id,book_relate_book_id,display_order,created_at,updated_at) values ({$k},{$v2},{$order},now(),now())";
      if($db->exec($sql) !== false) {
        echo "success id {$k} > {$v2}<br>";
      } else {
        echo "add book_relate error id {$k} > {$v2}<br>";
      }
    } else {
      // 存在する場合は処理しない
      echo "exist book_relate id {$k} > {$v2}<br>";
    }

    // main < sub の関連書籍レコードの存在チェック
    $sql = "select id from book_relates where book_id = '{$v2}' and book_relate_book_id = {$k};";
    $sth = $db->query($sql);
    $check = $sth->fetch(PDO::FETCH_ASSOC);
    if(empty($check)) {
      // 並び順を取得
      $order = 1;
      $sql = "select max(display_order) as maxorder from book_relates where book_id = '{$v2}';";
      $sth = $db->query($sql);
      $max = $sth->fetch(PDO::FETCH_ASSOC);
      if(!empty($max)) {
        $order = intval($max['maxorder']) + 1;
      }

      // main < sub の関連書籍レコード 追加
      $sql = "insert into book_relates (book_id,book_relate_book_id,display_order,created_at,updated_at) values ({$v2},{$k},{$order},now(),now())";
      if($db->exec($sql) !== false) {
        echo "success id {$k} < {$v2}<br>";
      } else {
        echo "add book_relate error id {$k} < {$v2}<br>";
      }
    } else {
      // 存在する場合は処理しない
      echo "exist book_relate id {$k} < {$v2}<br>";
    }
    flush();
    ob_flush();
  }
}
flush();
ob_flush();

ob_end_flush();

echo "end!!";
exit();
